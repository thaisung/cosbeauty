{% extends './base.html' %}
{% block title %}Trang thay đổi thông tin Về chúng tôi{% endblock %}
{% block content %}
<div class="w-full flex-col ">
    <div class="flex items-center justify-between border-b-[1px] border-[#0e203c] max-h-[50px] px-3 py-2 font-bold">
        <span class="uppercase w-full flex justify-center lg:justify-start">
            Trang thay đổi thông tin Về chúng tôi
        </span>
        <style>
            input:focus {
                outline: none !important;
            }
        </style>

    </div>
    <div class="flex flex-col gap-3 p-3">
        <div class="flex flex-col gap-1">
            <span class="font-semibold text-[18px] hover:underline">
                1.Banner
            </span>
            <form method="post" action="{% url 'cosbeauty_change_about_us' %}" enctype="multipart/form-data" class="flex flex-col gap-2 lg:w-[50%] w-full">
                {% csrf_token %}
                <div class="flex flex-col lg:flex-row gap-5">
                    <div class="flex flex-col gap-2 w-full">
                        <!-- <span class="font-semibold">- Hình ảnh 1</span> -->
                        <div class="flex flex-col gap-1 w-full">
                            {% if obj.Media %}
                                {% if ".mp4" in obj.Media.url|lower %}
                                    <video controls autoplay muted loop playsinline class="w-full h-auto">
                                        <source src="{{ obj.Media.url }}" type="video/mp4">
                                        Trình duyệt không hỗ trợ video.
                                    </video>
                                {% else %}
                                    <img alt="Media" src="{{ obj.Media.url }}" class="w-full h-auto" />
                                {% endif %}
                            {% endif %}
                            <input type="file" class="rounded-md w-full" accept="image/*,video/*" name="Media" />
                        </div>
                        <!-- <textarea name="Content3" class="autoresize rounded-md" placeholder="Nội dung 3">{{obj_Count_1.Content3|default:''}}</textarea> -->
                    </div>
                </div>
                <button type="submit" class=" flex justify-center items-center w-full p-2 rounded-md bg-green-500 font-semibold text-md hover:cursor-pointer">
                    Cập nhật
                </button>
            </form>
        </div>
        <div class="flex flex-col gap-1">
            <span class="font-semibold text-[18px] hover:underline">
                2.Giới thiệu về chúng tôi
            </span>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-[15px] w-full">
                <form method="post" action="{% url 'cosbeauty_change_about_us' %}" enctype="multipart/form-data" class="flex flex-col gap-2  w-full">
                    {% csrf_token %}
                    <div class="flex flex-col lg:flex-row gap-5">
                        <textarea name="Content1" class="autoresize rounded-md w-full" placeholder="Nội dung 1 VI">{{obj.Content1|default:''}}</textarea>
                        <textarea name="Content1_EN" class="autoresize rounded-md w-full" placeholder="Nội dung 1 EN">{{obj.Content1_EN|default:''}}</textarea>
                    </div>
                    <button type="submit" class=" flex justify-center items-center w-full  p-2 rounded-md bg-green-500 font-semibold text-md hover:cursor-pointer">
                        Cập nhật Nội dung 1
                    </button>
                </form>
                <form method="post" action="{% url 'cosbeauty_change_about_us' %}" enctype="multipart/form-data" class="flex flex-col gap-2  w-full">
                    {% csrf_token %}
                    <div class="flex flex-col lg:flex-row gap-5">
                        <textarea name="Content2" class="autoresize rounded-md w-full" placeholder="Nội dung 2 VI">{{obj.Content2|default:''}}</textarea>
                        <textarea name="Content2_EN" class="autoresize rounded-md w-full" placeholder="Nội dung 2 EN">{{obj.Content2_EN|default:''}}</textarea>
                    </div>
                    <button type="submit" class=" flex justify-center items-center w-full  p-2 rounded-md bg-green-500 font-semibold text-md hover:cursor-pointer">
                        Cập nhật Nội dung 2
                    </button>
                </form>
                <form method="post" action="{% url 'cosbeauty_change_about_us' %}" enctype="multipart/form-data" class="flex flex-col gap-2  w-full">
                    {% csrf_token %}
                    <div class="flex flex-col lg:flex-row gap-5">
                        <div class="flex flex-col gap-1 w-full">
                            {% if obj.Media3 %}
                                {% if ".mp4" in obj.Media3.url|lower %}
                                    <video controls autoplay muted loop playsinline class="w-full h-auto">
                                        <source src="{{ obj.Media3.url }}" type="video/mp4">
                                        Trình duyệt không hỗ trợ video.
                                    </video>
                                {% else %}
                                    <img alt="Media3" src="{{ obj.Media3.url }}" class="w-full h-auto" />
                                {% endif %}
                            {% endif %}
                            <input type="file" class="rounded-md w-full" accept="image/*,video/*" name="Media3" />
                        </div>
                        <textarea name="Content3" class="autoresize rounded-md w-full" placeholder="Nội dung 3 VI">{{obj.Content3|default:''}}</textarea>
                        <textarea name="Content3_EN" class="autoresize rounded-md w-full" placeholder="Nội dung 3 EN">{{obj.Content3_EN|default:''}}</textarea>
                    </div>
                    <button type="submit" class=" flex justify-center items-center w-full  p-2 rounded-md bg-green-500 font-semibold text-md hover:cursor-pointer">
                        Cập nhật Bài viết 1
                    </button>
                </form>
                <form method="post" action="{% url 'cosbeauty_change_about_us' %}" enctype="multipart/form-data" class="flex flex-col gap-2  w-full">
                    {% csrf_token %}
                    <div class="flex flex-col lg:flex-row gap-5">
                        <div class="flex flex-col gap-1 w-full">
                            {% if obj.Media4 %}
                                {% if ".mp4" in obj.Media4.url|lower %}
                                    <video controls autoplay muted loop playsinline class="w-full h-auto">
                                        <source src="{{ obj.Media4.url }}" type="video/mp4">
                                        Trình duyệt không hỗ trợ video.
                                    </video>
                                {% else %}
                                    <img alt="Media4" src="{{ obj.Media4.url }}" class="w-full h-auto" />
                                {% endif %}
                            {% endif %}
                            <input type="file" class="rounded-md w-full" accept="image/*,video/*" name="Media4" />
                        </div>
                        <textarea name="Content4" class="autoresize rounded-md w-full" placeholder="Nội dung 4 VI">{{obj.Content4|default:''}}</textarea>
                        <textarea name="Content4_EN" class="autoresize rounded-md w-full" placeholder="Nội dung 4 EN">{{obj.Content4_EN|default:''}}</textarea>
                    </div>
                    <button type="submit" class=" flex justify-center items-center w-full  p-2 rounded-md bg-green-500 font-semibold text-md hover:cursor-pointer">
                        Cập nhật Bài viết 2
                    </button>
                </form>
            </div>
        </div>
        <div class="flex flex-col gap-1">
            <span class="font-semibold text-[18px] hover:underline">
                3.Các cam kết
            </span>
            <form method="post" action="{% url 'cosbeauty_change_commit' %}" enctype="multipart/form-data" class="flex flex-col gap-2 lg:w-[50%] w-full">
                {% csrf_token %}
                <div class="flex flex-col lg:flex-row gap-5">
                    <div class="flex flex-col gap-2 w-full">
                        <!-- <span class="font-semibold">- Hình ảnh 1</span> -->
                        <div class="flex flex-col lg:flex-row gap-2">
                            <input type="text" class="rounded-md w-full"  name="Title" placeholder="Tiêu đề VI" />
                            <input type="text" class="rounded-md w-full"  name="Title_EN"  placeholder="Tiêu đề EN"/>
                        </div>
                        <div class="flex flex-col lg:flex-row gap-2">
                            <textarea name="Content" class="autoresize rounded-md w-full" placeholder="Nội dung VI"></textarea>
                            <textarea name="Content_EN" class="autoresize rounded-md w-full" placeholder="Nội dung EN"></textarea>
                        </div>
                        <div class="flex flex-col gap-1 w-full">
                            <input type="file" class="rounded-md w-full" accept="image/*,video/*" name="Media" />
                        </div>
                    </div>
                </div>
                <button type="submit" class=" flex justify-center items-center w-full p-2 rounded-md bg-green-500 font-semibold text-md hover:cursor-pointer">
                    Thêm
                </button>
            </form>
            <span class="font-semibold text-[18px] hover:underline">
                Danh sác các cam kết :
            </span>
            <div class="grid grid-cols-1 lg:grid-cols-3 w-full gap-[20px]">
                {% for i in list_commit %}
                <div class="w-full relative flex flex-col gap-2">
                    <form method="post" action="{% url 'cosbeauty_change_commit' %}" enctype="multipart/form-data" class="flex flex-col gap-2  w-full justify-between">
                        {% csrf_token %}
                        <div class="flex flex-col lg:flex-row gap-5">
                            <div class="flex flex-col gap-2 w-full">
                                <!-- <span class="font-semibold">- Hình ảnh 1</span> -->
                                <input type="hidden" class="rounded-md w-full"  name="id" value="{{i.id}}" />
                                <div class="flex flex-col gap-1 w-full">
                                    {% if i.Media %}
                                    <img src="{{i.Media.url}}" class="w-full h-auto"/>
                                    {% endif %}
                                    <input type="file" class="rounded-md w-full" accept="image/*,video/*" name="Media" />
                                </div>
                                <div class="flex flex-col lg:flex-row gap-2">
                                    <input type="text" class="rounded-md w-full"  name="Title" placeholder="Tiêu đề VI" value="{{i.Title}}"/>
                                    <input type="text" class="rounded-md w-full"  name="Title_EN"  placeholder="Tiêu đề EN" value="{{i.Title_EN}}"/>
                                </div>
                                <div class="flex flex-col lg:flex-row gap-2">
                                    <textarea name="Content" class="autoresize rounded-md w-full min-h-[200px] max-h-[200px]" placeholder="Nội dung VI">{{i.Content}}</textarea>
                                    <textarea name="Content_EN" class="autoresize rounded-md w-full min-h-[200px] max-h-[200px]" placeholder="Nội dung EN">{{i.Content_EN}}</textarea>
                                </div>
                            </div>   
                        </div>
                        <button type="submit" class=" flex justify-center items-center w-full p-2 rounded-md bg-green-500 font-semibold text-md hover:cursor-pointer">
                            Cập nhật
                        </button>
                    </form>
                    <form method="post"  action="{% url 'cosbeauty_remove_commit' %}" class=" fill-red-500">
                        {% csrf_token %}
                        <input type="hidden" name="id" value="{{i.id}}" class="" />
                        <button type="submit" class=" flex justify-center items-center w-full p-2 rounded-md bg-red-500 font-semibold text-md hover:cursor-pointer">
                            Xoá
                        </button>
                    </form>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function() {
        $('.open_input_Size').on('click', function() {
            $('.input_Size').toggle(); // Bật nếu ẩn, ẩn nếu bật
        });
    });
</script>
<script>
    function autoResize(el) {
        el.style.height = 'auto';
        el.style.height = el.scrollHeight + 'px';
    }

    document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('textarea.autoresize').forEach(function (el) {
            autoResize(el);
            el.addEventListener('input', () => autoResize(el));
        });
    });
</script>
{% endblock %}